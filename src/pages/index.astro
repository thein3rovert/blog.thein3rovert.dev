---
import { type CollectionEntry, getCollection } from "astro:content";
import SocialList from "@/components/SocialList.astro";
import PostPreview from "@/components/blog/PostPreview.astro";
// import Note from "@/components/note/Note.astro";
import { getAllPosts } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";
import { collectionDateSort } from "@/utils/date";

// Posts
const MAX_POSTS = 10; // Changing the noof post in the frontend
const allPosts = await getAllPosts();
const allPostsByDate = allPosts
	.sort(collectionDateSort)
	.slice(0, MAX_POSTS) as CollectionEntry<"post">[];

// Notes
const MAX_NOTES = 5;
const allNotes = await getCollection("note");
const latestNotes = allNotes.sort(collectionDateSort).slice(0, MAX_NOTES);
---

<PageLayout meta={{ title: "Home" }}>
	<!-- Introduction Section -->
	<section class="mb-4 px-1 sm:p-4">
		<h2 class="blinking-title mb-6">HI, I'M SAMAD.</h2>
		<p class="mb-4 text-base">
			Coder, cyclist, hiker, mini-PC enthusiast, soon-to-be long-haul homelaber, GNU/Linux guy, and
			mid-tier keyboard snob. I use Nix, btw.
		</p>
		<SocialList />

	</section>

  <!-- Journal Section -->
	<section class="px-1 sm:p-4" aria-label="Journal">
    <h2 class="blinking-title mb-6">JOURNAL</h2>

    <div class="font-mono text-[4px] xs:text-[6px] sm:text-xs md:text-sm mb-6">
      <pre class="no-border whitespace-pre text-[4px] xs:text-[6px] sm:text-xs md:text-sm leading-tight">
████████ ██   ██ ███████ ██ ███    ██ ██████  ██████   ██████  ██    ██ ███████ ██████  ████████
   ██    ██   ██ ██      ██ ████   ██      ██ ██   ██ ██    ██ ██    ██ ██      ██   ██    ██
   ██    ███████ █████   ██ ██ ██  ██  █████  ██████  ██    ██ ██    ██ █████   ██████     ██
   ██    ██   ██ ██      ██ ██  ██ ██      ██ ██   ██ ██    ██  ██  ██  ██      ██   ██    ██
   ██    ██   ██ ███████ ██ ██   ████ ██████  ██   ██  ██████    ████   ███████ ██   ██    ██
      </pre>
    </div>

    <div class="text-base leading-relaxed mb-4">
      <p class="mb-4">
        Whenever I find myself growing grim about the mouth; whenever it is a damp, drizzly November in my soul; whenever I find myself involuntarily pausing before coffin warehouses, and bringing up the rear of every funeral I meet; and especially whenever my hypos get such an upper hand of me, that it requires a strong moral principle to prevent me from deliberately stepping into the street, and methodically knocking people's hats off--then, I account it high time to get to sea as soon as I can. This is my substitute for pistol and ball. With a philosophical flourish Cato throws himself upon his sword; I quietly take to the ship.
      </p>
      <p class="text-sm italic text-gray-600">
        - Herman Melville, Moby-Dick; or, The Whale (1851)
      </p>
    </div>
	</section>
	{
	// I dont want to have the note in the homepage
		latestNotes.length > 0 && (
			<!-- <section class="mt-16">
				<h2 class="title text-accent mb-6 text-xl">
					<a href="/notes/">Notes</a>
				</h2>
        <ul class="bg-black text-green-500 font-mono p-4 rounded-lg shadow-lg space-y-2" role="list" style="border: 2px solid #222;">
          {latestNotes.map((note, idx) => (
            <li class="flex items-start">
              <span class="pr-2 select-none">$ {idx + 1}</span>
              <Note note={note} as="h3" isPreview />
            </li>
          ))}
        </ul>
			</section> -->
		)
	}
</PageLayout>
